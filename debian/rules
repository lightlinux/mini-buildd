#!/usr/bin/make -f

#export DH_VERBOSE = 1

%:
	dh $@ --with=python3,sphinxdoc --buildsystem=pybuild

ifeq (,$(filter nocheck,$(DEB_BUILD_OPTIONS)))
override_dh_auto_test:
	dh_auto_test
	./devel pydoctests
endif

override_dh_auto_clean:
	dh_auto_clean
	rm -rf build/ src/*.egg-info/

override_dh_fixperms:
	dh_fixperms
	chmod 440 debian/mini-buildd/etc/sudoers.d/mini-buildd-sudoers

# Don't compress anything in examples, so scripts and packages can be used as-is.
override_dh_compress:
	dh_compress -X examples/
